<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rafi's cookbook</title>
    <link rel="stylesheet" href="assets/styling/style.css">
</head>

<body class="mainbody">
    <div>
        <img src="assets/images/spine.jpg" id="spine">
    </div>
    <nav>
        <a href="./"><h1>Rafi's cookbook</h1></a>
    </nav>

    <iframe src="main.html" frameborder="0" id="frame"></iframe>

    <script>
        function loadSideBar() {
            const nav = document.querySelector("nav");
            fetch("assets/routes.json")
                .then(res => res.json())
                .then(json => {
                    for (const [island, options] of Object.entries(json)) {
                        nav.insertAdjacentHTML("beforeend", 
                            `<div id="${island}">
                                ${options.map(element => {
                                    return `
                                        <div class="dropdown" id="${element[0]}">
                                            <label><input type="checkbox">${element[1]}<span class="material">arrow_forward_ios</span></label>
                                            <div>
                                                ${element[2].map(subelement => {
                                                    return `<button id="${subelement[1]}" onclick="openRecipe(this)">${subelement[0]}</button>`
                                                }).join("")}
                                            </div>
                                        </div>
                                    `
                                }).join("")}
                            </div>`
                        )
                    }
                });
        }

        function openRecipe(element) {
            window.location.hash = element.parentElement.parentElement.id + "/" + element.id;
            document.getElementById("frame").src = "recipe.html";
        }
        
        loadSideBar();
        if (window.location.hash.length > 1) {
            document.getElementById("frame").src = "recipe.html";
        }
    </script>
</body>

</html>